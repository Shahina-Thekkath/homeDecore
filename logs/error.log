2026-01-19 22:45:15 [error]: ReferenceError: Cannot access 'order' before initialization
    at placeCODOrder (file:///C:/Users/shahi/project/ecommerceWebsite/services/order.service.js:8:29)
    at file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:236:20
    at withTransaction (file:///C:/Users/shahi/project/ecommerceWebsite/utils/withTransaction.js:7:30)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async saveOrderInSession (file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:235:24)
2026-01-19 22:47:14 [error]: MongoServerError: Transaction numbers are only allowed on a replica set member or mongos
    at Connection.sendCommand (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cmap\connection.js:305:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Connection.command (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cmap\connection.js:333:26)
    at async Server.command (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\sdam\server.js:171:29)
    at async FindOperation.execute (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\operations\find.js:36:16)
    at async tryOperation (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\operations\execute_operation.js:207:20)
    at async executeOperation (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\operations\execute_operation.js:75:16)
    at async FindCursor._initialize (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\find_cursor.js:61:26)
    at async FindCursor.cursorInit (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\abstract_cursor.js:632:27)
    at async FindCursor.fetchBatch (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\abstract_cursor.js:666:13)
    at async FindCursor.next (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\abstract_cursor.js:342:17)
    at async Collection.findOne (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\collection.js:277:21)
    at async model.Query._findOne (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongoose\lib\query.js:2710:15)
    at async model.Query.exec (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongoose\lib\query.js:4627:63)
    at async placeCODOrder (file:///C:/Users/shahi/project/ecommerceWebsite/services/order.service.js:9:25)
    at async file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:236:14
2026-01-20 11:10:55 [error]: MongoServerError: Transaction numbers are only allowed on a replica set member or mongos
    at Connection.sendCommand (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cmap\connection.js:305:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Connection.command (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cmap\connection.js:333:26)
    at async Server.command (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\sdam\server.js:171:29)
    at async FindOperation.execute (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\operations\find.js:36:16)
    at async tryOperation (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\operations\execute_operation.js:207:20)
    at async executeOperation (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\operations\execute_operation.js:75:16)
    at async FindCursor._initialize (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\find_cursor.js:61:26)
    at async FindCursor.cursorInit (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\abstract_cursor.js:632:27)
    at async FindCursor.fetchBatch (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\abstract_cursor.js:666:13)
    at async FindCursor.next (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\abstract_cursor.js:342:17)
    at async Collection.findOne (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\collection.js:277:21)
    at async model.Query._findOne (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongoose\lib\query.js:2710:15)
    at async model.Query.exec (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongoose\lib\query.js:4627:63)
    at async placeCODOrder (file:///C:/Users/shahi/project/ecommerceWebsite/services/order.service.js:9:25)
    at async file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:236:14
2026-01-21 03:48:27 [error]: MongoServerError: Transaction numbers are only allowed on a replica set member or mongos
    at Connection.sendCommand (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cmap\connection.js:305:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Connection.command (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cmap\connection.js:333:26)
    at async Server.command (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\sdam\server.js:171:29)
    at async FindOperation.execute (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\operations\find.js:36:16)
    at async tryOperation (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\operations\execute_operation.js:207:20)
    at async executeOperation (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\operations\execute_operation.js:75:16)
    at async FindCursor._initialize (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\find_cursor.js:61:26)
    at async FindCursor.cursorInit (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\abstract_cursor.js:632:27)
    at async FindCursor.fetchBatch (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\abstract_cursor.js:666:13)
    at async FindCursor.next (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\cursor\abstract_cursor.js:342:17)
    at async Collection.findOne (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongodb\lib\collection.js:277:21)
    at async model.Query._findOne (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongoose\lib\query.js:2710:15)
    at async model.Query.exec (C:\Users\shahi\project\ecommerceWebsite\node_modules\mongoose\lib\query.js:4627:63)
    at async placeCODOrder (file:///C:/Users/shahi/project/ecommerceWebsite/services/order.service.js:27:25)
    at async file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:224:14
2026-01-21 10:42:29 [error]: TypeError: Cannot read properties of undefined (reading 'push')
    at placeWalletOrder (file:///C:/Users/shahi/project/ecommerceWebsite/services/order.service.js:81:23)
    at file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:342:13
    at withTransaction (file:///C:/Users/shahi/project/ecommerceWebsite/utils/withTransaction.js:21:16)
    at saveWalletOrder (file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:341:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2026-01-21 10:47:37 [error]: TypeError: Cannot read properties of undefined (reading 'push')
    at placeWalletOrder (file:///C:/Users/shahi/project/ecommerceWebsite/services/order.service.js:81:24)
    at file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:342:13
    at withTransaction (file:///C:/Users/shahi/project/ecommerceWebsite/utils/withTransaction.js:21:16)
    at saveWalletOrder (file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:341:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
2026-01-21 10:51:18 [error]: TypeError: wallet.schemaLevelProjections is not a function
    at placeWalletOrder (file:///C:/Users/shahi/project/ecommerceWebsite/services/order.service.js:89:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:342:7
    at async withTransaction (file:///C:/Users/shahi/project/ecommerceWebsite/utils/withTransaction.js:21:10)
    at async saveWalletOrder (file:///C:/Users/shahi/project/ecommerceWebsite/controllers/user/orderController.js:341:6)
2026-01-21 13:21:24 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-21 13:38:29 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 13:42:15 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 16:04:42 [error]: TypeError: Cannot read properties of undefined (reading 'admin')
    at isLogin (file:///C:/Users/shahi/project/ecommerceWebsite/middleware/adminAuth.js:5:21)
    at Layer.handle [as handle_request] (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:328:13)
    at C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:280:10)
    at Function.handle (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:175:3)
    at router (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:47:12)
    at Layer.handle [as handle_request] (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:328:13)
    at C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:280:10)
    at Immediate._onImmediate (file:///C:/Users/shahi/project/ecommerceWebsite/middleware/checkBlocked.js:28:16)
    at process.processImmediate (node:internal/timers:478:21)
2026-01-22 16:10:56 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 16:12:17 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 16:14:37 [error]: TypeError: Cannot read properties of undefined (reading 'admin')
    at isLogin (file:///C:/Users/shahi/project/ecommerceWebsite/middleware/adminAuth.js:5:21)
    at Layer.handle [as handle_request] (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:328:13)
    at C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:280:10)
    at Function.handle (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:175:3)
    at router (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:47:12)
    at Layer.handle [as handle_request] (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:328:13)
    at C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\shahi\project\ecommerceWebsite\node_modules\express\lib\router\index.js:280:10)
    at Immediate._onImmediate (file:///C:/Users/shahi/project/ecommerceWebsite/middleware/checkBlocked.js:28:16)
    at process.processImmediate (node:internal/timers:478:21)
2026-01-22 16:20:12 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 16:35:01 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 16:41:23 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 16:47:18 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 16:49:04 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 16:54:13 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 16:56:15 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
2026-01-22 16:56:26 [error]: ðŸ”¥ FORCE FILE LOG TEST ðŸ”¥
